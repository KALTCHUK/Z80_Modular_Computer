RC51 COMPILER V06.20.17.263,  RS485_ECHO         09/28/22  21:03:45  PAGE  1

QCW(0x00002F32)

DOS RC51 COMPILER V06.20.17.263, COMPILATION OF MODULE RS485_ECHO
OBJECT MODULE PLACED IN C:\Users\kaltc\Documents\GitHub\Z80_Modular_Computer\Rid
            -e7\RS485_test\RS485_echo.obj
COMPILER INVOKED BY: QUIET GENERATEDEPFILE OJ(C:\Users\kaltc\Documents\GitHub\Z8
            -0_Modular_Computer\Ride7\RS485_test\RS485_echo.obj) PIN(C:\Users\ka
            -ltc\Documents\Raisonance\Ride\Inc;C:\Users\kaltc\Documents\Raisonan
            -ce\Ride\Inc\51) PIN(C:\Users\kaltc\Documents\Raisonance\Ride\\inc\5
            -1\Atmel) NOAM CD PR(C:\Users\kaltc\Documents\GitHub\Z80_Modular_Com
            -puter\Ride7\RS485_test\RS485_echo.lst) FP(NOFLOAT) IP NOIS UNSIGNED
            -CHAR ET(CHAR) PR PL(60) PW(80) OE(1) OT(7,SPEED) RB(0) MAXERR(25) M
            -AXWAR(25) SM MOD517(NODP8,NOAU) 

stmt level    source
   1          /*
   2           DO-8.c - Modbus RTU Slave controller (AT89C4051) for DO-8 Card. B
            -y Kaltchuk, Sep/2022.
   3          */
   4          
   5          #include <REG51.h>
   6          #include "Serial485.h"
   7          
   8          void main() {
   9   1      	baud = 9600;	// factory set baud rate.
  10   1      	serialInit(baud);
  11   1      	
  12   1      	while (1) {
  13   2              serialTX(serialRX());
  14   2      	}
  15   1      }
  16          
RC51 COMPILER V06.20.17.263,  RS485_ECHO         09/28/22  21:03:45  PAGE  4

ASSEMBLY LISTING OF GENERATED OBJECT CODE

            ; FUNCTION _serialInit (BEGIN)
              ; Register R6R7 is assigned to parameter baud
                                           ; SOURCE LINE # 29 
0000 C2B5           CLR    T1
                                           ; SOURCE LINE # 30 
0002 438920         ORL    TMOD,#020H
                                           ; SOURCE LINE # 31 
0005 438780         ORL    PCON,#080H
                                           ; SOURCE LINE # 32 
0008 759850         MOV    SCON,#050H
                                           ; SOURCE LINE # 33 
000B BE2507         CJNE   R6,#025H,?LAB9
000E EF             MOV    A,R7
000F 2480           ADD    A,#080H
0011 6051           JZ     ?CASE10
0013 8061           SJMP   ?NXT1
0015         ?LAB9:
0015 5021           JNC    ?LAB10
0017 EE             MOV    A,R6
0018 B40407         CJNE   A,#004H,?LAB11
001B EF             MOV    A,R7
001C 2450           ADD    A,#050H
001E 6035           JZ     ?CASE7
0020 8054           SJMP   ?NXT1
0022         ?LAB11:
0022 EE             MOV    A,R6
0023 B40907         CJNE   A,#009H,?LAB12
0026 EF             MOV    A,R7
0027 24A0           ADD    A,#0A0H
0029 602F           JZ     ?CASE8
002B 8049           SJMP   ?NXT1
002D         ?LAB12:
002D EE             MOV    A,R6
002E B41245         CJNE   A,#012H,?NXT1
0031 EF             MOV    A,R7
0032 2440           ADD    A,#040H
0034 6029           JZ     ?CASE9
0036 803E           SJMP   ?NXT1
0038         ?LAB10:
0038 EE             MOV    A,R6
0039 B44B05         CJNE   A,#04BH,?LAB13
003C EF             MOV    A,R7
003D 602A           JZ     ?CASE11
003F 8035           SJMP   ?NXT1
0041         ?LAB13:
0041 EE             MOV    A,R6
0042 B47007         CJNE   A,#070H,?LAB14
0045 EF             MOV    A,R7
0046 2480           ADD    A,#080H
0048 6024           JZ     ?CASE12
004A 802A           SJMP   ?NXT1
004C         ?LAB14:
004C EE             MOV    A,R6
004D B4E126         CJNE   A,#0E1H,?NXT1
0050 EF             MOV    A,R7
0051 6020           JZ     ?CASE13
0053 8021           SJMP   ?NXT1
0055         ?CASE7:
RC51 COMPILER V06.20.17.263,  RS485_ECHO         09/28/22  21:03:45  PAGE  2

                                           ; SOURCE LINE # 35 
0055 758DD0         MOV    TH1,#0D0H
                                           ; SOURCE LINE # 36 
0058 801C           SJMP   ?NXT1
005A         ?CASE8:
                                           ; SOURCE LINE # 38 
005A 758DE8         MOV    TH1,#0E8H
                                           ; SOURCE LINE # 39 
005D 8017           SJMP   ?NXT1
005F         ?CASE9:
                                           ; SOURCE LINE # 41 
005F 758DF4         MOV    TH1,#0F4H
                                           ; SOURCE LINE # 42 
0062 8012           SJMP   ?NXT1
0064         ?CASE10:
                                           ; SOURCE LINE # 44 
0064 758DFA         MOV    TH1,#0FAH
                                           ; SOURCE LINE # 45 
0067 800D           SJMP   ?NXT1
0069         ?CASE11:
                                           ; SOURCE LINE # 47 
0069 758DFD         MOV    TH1,#0FDH
                                           ; SOURCE LINE # 48 
006C 8008           SJMP   ?NXT1
006E         ?CASE12:
                                           ; SOURCE LINE # 50 
006E 758DFE         MOV    TH1,#0FEH
                                           ; SOURCE LINE # 51 
0071 8003           SJMP   ?NXT1
0073         ?CASE13:
                                           ; SOURCE LINE # 53 
0073 758DFF         MOV    TH1,#0FFH
0076         ?NXT1:
                                           ; SOURCE LINE # 56 
0076 D28E           SETB   TR1
                                           ; SOURCE LINE # 57 
0078 22             RET    

            ; FUNCTION _serialInit (END)

            ; FUNCTION _serialTX (BEGIN)
              ; Register R7 is assigned to parameter x
                                           ; SOURCE LINE # 60 
0000 D2B5           SETB   T1
                                           ; SOURCE LINE # 61 
0002 8F99           MOV    SBUF,R7
0004         ?WHILE1:
                                           ; SOURCE LINE # 62 
0004 3099FD         JNB    TI,?WHILE1
                                           ; SOURCE LINE # 63 
0007 C299           CLR    TI
                                           ; SOURCE LINE # 64 
0009 C2B5           CLR    T1
                                           ; SOURCE LINE # 65 
000B 22             RET    

            ; FUNCTION _serialTX (END)

RC51 COMPILER V06.20.17.263,  RS485_ECHO         09/28/22  21:03:45  PAGE  3

            ; FUNCTION serialRX (BEGIN)
0000         ?WHILE3:
                                           ; SOURCE LINE # 68 
0000 3098FD         JNB    RI,?WHILE3
                                           ; SOURCE LINE # 69 
0003 C298           CLR    RI
                                           ; SOURCE LINE # 70 
0005 AF99           MOV    R7,SBUF
                                           ; SOURCE LINE # 71 
0007 22             RET    

            ; FUNCTION serialRX (END)

            ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 9 
0000 750025  R      MOV    baud,#025H
0003 750080  R      MOV    baud+01H,#080H
                                           ; SOURCE LINE # 10 
0006 AE00    R      MOV    R6,baud
0008 AF00    R      MOV    R7,baud+01H
000A 120000  R      LCALL  _serialInit
000D         ?WHILE5:
                                           ; SOURCE LINE # 13 
000D 120000  R      LCALL  serialRX
0010 120000  R      LCALL  _serialTX
0013 80F8           SJMP   ?WHILE5

            ; FUNCTION main (END)

RC51 COMPILER V06.20.17.263,  RS485_ECHO         09/28/22  21:03:45  PAGE  5



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    162    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

RC51 COMPILATION COMPLETE.  0 WARNING,  0 ERROR
