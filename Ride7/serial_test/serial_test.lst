RC51 COMPILER V06.20.17.263,  SERIAL_TEST        09/15/22  07:42:21  PAGE  1

QCW(0x00002F32)

DOS RC51 COMPILER V06.20.17.263, COMPILATION OF MODULE SERIAL_TEST
OBJECT MODULE PLACED IN C:\Users\ricardo\Documents\GitHub\Z80_Modular_Computer\R
            -ide7\serial_test\serial_test.obj
COMPILER INVOKED BY: QUIET GENERATEDEPFILE OJ(C:\Users\ricardo\Documents\GitHub\
            -Z80_Modular_Computer\Ride7\serial_test\serial_test.obj) PIN(C:\User
            -s\ricardo\Documents\Raisonance\Ride\Inc;C:\Users\ricardo\Documents\
            -Raisonance\Ride\Inc\51) PIN(C:\Users\ricardo\Documents\Raisonance\R
            -ide\\inc\51\Atmel) NOAM CD PR(C:\Users\ricardo\Documents\GitHub\Z80
            -_Modular_Computer\Ride7\serial_test\serial_test.lst) FP(NOFLOAT) IP
            - NOIS UNSIGNEDCHAR ET(CHAR) PR PL(60) PW(80) OE(1) OT(7,SPEED) RB(0
            -) MAXERR(25) MAXWAR(25) SM MOD517(NODP8,NOAU) 

stmt level    source
   1          // Serial communication test.
   2          
   3          
   4          #include "REG51.h" 
   5          #include <stdio.h> 
   6          #include <stdlib.h>
   7          
   8          void serialInit(void);
   9          void serialTX(unsigned char x);
  10          void delay(int t);
  11          
  12          void main(void) {
  13   1          serialInit();
  14   1      
  15   1          while(1) {
  16   2              serialTX('A');
  17   2              serialTX('B');
  18   2              serialTX('C');
  19   2          }
  20   1      }
  21          
  22          void serialInit() {
  23   1          TMOD = 0x20;        // TIMER1 = mode 2
  24   1          TH1 = 0xfd;         // 0xf4 => 2400bps, 0xfa => 4800bps, 0xfd 
            -=> 9600bps, @ 11.0592MHz
  25   1          PCON |= 0x80;       // SMOD=1 => double baud rate;
  26   1          SCON = 0x50;        // Serial port = mode 1 (8 bits, clocked b
            -y TIMER1)
  27   1          TR1 = 1;            // Turn on TIMER1
  28   1      }
  29          
  30          void serialTX(unsigned char x) {
  31   1          SBUF = x;
  32   1          while(TI == 0);
  33   1          TI = 0;
  34   1      }
  35          /*
  36          void delay (int t) {
  37              int x;
  38          
  39              for(x = 0; x < t; x++);
  40          }
  41          */
RC51 COMPILER V06.20.17.263,  SERIAL_TEST        09/15/22  07:42:21  PAGE  2
RC51 COMPILER V06.20.17.263,  SERIAL_TEST        09/15/22  07:42:21  PAGE  3


ASSEMBLY LISTING OF GENERATED OBJECT CODE

            ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 13 
0000 120000  R      LCALL  serialInit
0003         ?WHILE1:
                                           ; SOURCE LINE # 16 
0003 7F41           MOV    R7,#041H
0005 120000  R      LCALL  _serialTX
                                           ; SOURCE LINE # 17 
0008 7F42           MOV    R7,#042H
000A 120000  R      LCALL  _serialTX
                                           ; SOURCE LINE # 18 
000D 7F43           MOV    R7,#043H
000F 120000  R      LCALL  _serialTX
0012 80EF           SJMP   ?WHILE1

            ; FUNCTION main (END)

            ; FUNCTION serialInit (BEGIN)
                                           ; SOURCE LINE # 23 
0000 758920         MOV    TMOD,#020H
                                           ; SOURCE LINE # 24 
0003 758DFD         MOV    TH1,#0FDH
                                           ; SOURCE LINE # 25 
0006 438780         ORL    PCON,#080H
                                           ; SOURCE LINE # 26 
0009 759850         MOV    SCON,#050H
                                           ; SOURCE LINE # 27 
000C D28E           SETB   TR1
                                           ; SOURCE LINE # 28 
000E 22             RET    

            ; FUNCTION serialInit (END)

            ; FUNCTION _serialTX (BEGIN)
              ; Register R7 is assigned to parameter x
                                           ; SOURCE LINE # 31 
0000 8F99           MOV    SBUF,R7
0002         ?WHILE3:
                                           ; SOURCE LINE # 32 
0002 3099FD         JNB    TI,?WHILE3
                                           ; SOURCE LINE # 33 
0005 C299           CLR    TI
                                           ; SOURCE LINE # 34 
0007 22             RET    

            ; FUNCTION _serialTX (END)

RC51 COMPILER V06.20.17.263,  SERIAL_TEST        09/15/22  07:42:21  PAGE  4



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     43    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

RC51 COMPILATION COMPLETE.  0 WARNING,  0 ERROR
