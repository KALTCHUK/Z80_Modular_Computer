0001   0000             ;==================================================================================
0002   0000             ; Read FCB and send to console
0003   0000             ;
0004   0000             ;==================================================================================
0005   0000             REBOOT		.EQU	0H
0006   0000             BDOS		.EQU	5H
0007   0000             TPA			.EQU	0100H
0008   0000             
0009   0000             C_READ		.EQU	1
0010   0000             C_WRITE		.EQU	2
0011   0000             C_STRING	.EQU	9
0012   0000             F_CLOSE		.EQU	16
0013   0000             F_DELETE	.EQU	19
0014   0000             F_WRITE		.EQU	21
0015   0000             F_MAKE		.EQU	22
0016   0000             F_DMAOFF	.EQU	26
0017   0000             
0018   0000             EOT			.EQU	023H		;04H
0019   0000             ACK			.EQU	024H		;06H
0020   0000             LF			.EQU	0AH
0021   0000             CR			.EQU	0DH
0022   0000             NAK			.EQU	025H		;015H
0023   0000             EM			.EQU	026H		;019H
0024   0000             		
0025   0000             FCB			.EQU	0005CH
0026   0000             DMA			.EQU	080H
0027   0000             ;==================================================================================
0028   0100             			.ORG TPA
0029   0100 31 72 01    			LD	SP,STACK
0030   0103             			
0031   0103 21 5D 00    			LD	HL,FCB+1
0032   0106 11 30 01    			LD	DE,FCB1
0033   0109 01 0B 00    			LD	BC,11
0034   010C ED B0       			LDIR
0035   010E 0E 09       			LD	C,C_STRING
0036   0110 11 2C 01    			LD	DE,MSG1
0037   0113 CD 05 00    			CALL BDOS
0038   0116             			
0039   0116 21 6C 00    			LD	HL,FCB+16
0040   0119 11 43 01    			LD	DE,FCB2
0041   011C 01 0B 00    			LD	BC,11
0042   011F ED B0       			LDIR
0043   0121 0E 09       			LD	C,C_STRING
0044   0123 11 3F 01    			LD	DE,MSG2
0045   0126 CD 05 00    			CALL BDOS
0046   0129             
0047   0129 C3 00 00    			JP	REBOOT
0048   012C             
0049   012C             ;==================================================================================
0050   012C 46 43 42 3D MSG1		.DB	"FCB="
0051   0130             FCB1		.DS	11
0052   013B 2E 0D 0A 24 			.DB	".",CR,LF,"$"
0053   013F 44 20 20 3D MSG2		.DB	"D  ="
0054   0143             FCB2		.DS	11
0055   014E 2E 0D 0A 24 			.DB	".",CR,LF,"$"
0056   0152             
0057   0152             			.DS	020h			; Start of stack area.
0058   0172             STACK		.EQU	$
0059   0172             
0060   0172             			.END
tasm: Number of errors = 0
